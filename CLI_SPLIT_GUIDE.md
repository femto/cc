# CLI.js æ‹†åˆ†å®ŒæˆæŒ‡å—

## âœ… ä»»åŠ¡å®Œæˆ

åŸå§‹çš„ **cli.js**ï¼ˆ496,069è¡Œï¼Œ15MBï¼‰å·²æˆåŠŸæ‹†åˆ†ä¸º **10ä¸ªè¾ƒå°çš„æ–‡ä»¶**ï¼Œæ¯ä¸ªæ–‡ä»¶çº¦ 60,000 è¡Œï¼Œå¤§å°åœ¨ 1-2MB ä¹‹é—´ã€‚

## ğŸ“ æ–‡ä»¶ç»“æ„

```
/code/
â”œâ”€â”€ cli.js                    # åŸå§‹æ–‡ä»¶ (15MB, 496Kè¡Œ) - å·²åŠ å…¥ .gitignore
â”œâ”€â”€ cli-rebuilt.js            # ä»æ‹†åˆ†éƒ¨åˆ†é‡å»ºçš„æ–‡ä»¶ - å·²åŠ å…¥ .gitignore
â”œâ”€â”€ build-cli.sh              # æ„å»ºè„šæœ¬ï¼šåˆå¹¶æ‹†åˆ†çš„éƒ¨åˆ†
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ README.md             # è¯¦ç»†çš„æ‹†åˆ†è¯´æ˜æ–‡æ¡£
â”‚   â””â”€â”€ parts/                # æ‹†åˆ†åçš„æ–‡ä»¶
â”‚       â”œâ”€â”€ part-00-header.js        (1 è¡Œ, 20B)
â”‚       â”œâ”€â”€ part-01-utils.js         (60K è¡Œ, 1.8MB)
â”‚       â”œâ”€â”€ part-02-aws-sdk.js       (60K è¡Œ, 1.9MB)
â”‚       â”œâ”€â”€ part-03-dependencies.js  (60K è¡Œ, 1.9MB)
â”‚       â”œâ”€â”€ part-04-core.js          (60K è¡Œ, 2.0MB)
â”‚       â”œâ”€â”€ part-05-cli.js           (60K è¡Œ, 2.1MB)
â”‚       â”œâ”€â”€ part-06-api.js           (60K è¡Œ, 1.7MB)
â”‚       â”œâ”€â”€ part-07-tools.js         (60K è¡Œ, 1.9MB)
â”‚       â”œâ”€â”€ part-08-runtime.js       (60K è¡Œ, 1.6MB)
â”‚       â””â”€â”€ part-09-main.js          (16K è¡Œ, 441KB)
â””â”€â”€ package.json              # æ›´æ–°äº†æ„å»ºè„šæœ¬
```

## ğŸ¯ æ‹†åˆ†æ–¹æ³•

ä½¿ç”¨ç­‰ä»·å˜æ¢ï¼šæŒ‰è¡Œå·èŒƒå›´å°†åŸå§‹æ–‡ä»¶æ‹†åˆ†ä¸ºå¤šä¸ªéƒ¨åˆ†

```bash
# ç¬¬ 1 è¡Œ
part-00-header.js

# ç¬¬ 2-60,000 è¡Œ
part-01-utils.js

# ç¬¬ 60,001-120,000 è¡Œ
part-02-aws-sdk.js

# ç¬¬ 120,001-180,000 è¡Œ
part-03-dependencies.js

# ... ä»¥æ­¤ç±»æ¨
```

## âœ¨ ä¼˜åŠ¿

### ä¹‹å‰ï¼ˆå•ä¸ªå¤§æ–‡ä»¶ï¼‰
âŒ æ— æ³•åœ¨å¤§å¤šæ•°ç¼–è¾‘å™¨ä¸­æ‰“å¼€
âŒ æœç´¢éœ€è¦å¾ˆé•¿æ—¶é—´
âŒ Git éš¾ä»¥ç®¡ç†
âŒ æ— æ³•æŸ¥çœ‹ä»£ç ç»“æ„

### ç°åœ¨ï¼ˆæ‹†åˆ†åï¼‰
âœ… æ¯ä¸ªæ–‡ä»¶éƒ½å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€
âœ… æœç´¢å¿«é€Ÿä¸”ç²¾å‡†
âœ… Git å¯ä»¥è¿½è¸ªæ¯ä¸ªéƒ¨åˆ†çš„å˜åŒ–
âœ… å¯ä»¥å®šä½åˆ°å…·ä½“çš„ä»£ç åŒºåŸŸ
âœ… **ç­‰ä»·å˜æ¢** - åŠŸèƒ½å®Œå…¨ç›¸åŒ

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä½¿ç”¨åŸå§‹æ–‡ä»¶ï¼ˆå¦‚æœä½ çš„ç³»ç»Ÿèƒ½å¤„ç†ï¼‰

```bash
./cli.js --help
```

### 2. ä»æ‹†åˆ†çš„éƒ¨åˆ†é‡å»ºæ–‡ä»¶

```bash
# ä½¿ç”¨æ„å»ºè„šæœ¬
./build-cli.sh

# æˆ–ä½¿ç”¨ npm
npm run build

# è¿è¡Œé‡å»ºçš„æ–‡ä»¶
./cli-rebuilt.js --help
```

### 3. æœç´¢ç‰¹å®šåŠŸèƒ½

ç°åœ¨ä½ å¯ä»¥åœ¨è¾ƒå°çš„æ–‡ä»¶ä¸­æœç´¢ï¼

```bash
# æœç´¢ Bedrock é…ç½®
grep -n "bedrock" src/parts/part-02-aws-sdk.js

# æœç´¢ Anthropic API
grep -n "anthropic" src/parts/part-01-utils.js

# æœç´¢ CLI å‘½ä»¤
grep -n "command\|argument" src/parts/part-05-cli.js
```

### 4. æŸ¥çœ‹ç‰¹å®šåŒºåŸŸ

```bash
# æŸ¥çœ‹ API å¸¸é‡ï¼ˆåŸå§‹ç¬¬ 47000 è¡Œé™„è¿‘ï¼‰
# ç°åœ¨åœ¨ part-01-utils.js
head -n 7100 src/parts/part-01-utils.js | tail -n 100

# æŸ¥çœ‹ Bedrock æ¨¡å‹é…ç½®ï¼ˆåŸå§‹ç¬¬ 89000 è¡Œé™„è¿‘ï¼‰
# ç°åœ¨åœ¨ part-02-aws-sdk.js çš„ç¬¬ 29000 è¡Œé™„è¿‘
sed -n '29000,29100p' src/parts/part-02-aws-sdk.js
```

## ğŸ” è¡Œå·æ˜ å°„

è¦æ‰¾åˆ°åŸå§‹ cli.js ä¸­æŸè¡Œåœ¨æ‹†åˆ†æ–‡ä»¶ä¸­çš„ä½ç½®ï¼š

| åŸå§‹è¡Œå·èŒƒå›´ | æ‹†åˆ†æ–‡ä»¶ | æ–‡ä»¶å†…è¡Œå· |
|-------------|---------|-----------|
| 1 | part-00-header.js | 1 |
| 2 - 60,000 | part-01-utils.js | 1 - 59,999 |
| 60,001 - 120,000 | part-02-aws-sdk.js | 1 - 60,000 |
| 120,001 - 180,000 | part-03-dependencies.js | 1 - 60,000 |
| 180,001 - 240,000 | part-04-core.js | 1 - 60,000 |
| 240,001 - 300,000 | part-05-cli.js | 1 - 60,000 |
| 300,001 - 360,000 | part-06-api.js | 1 - 60,000 |
| 360,001 - 420,000 | part-07-tools.js | 1 - 60,000 |
| 420,001 - 480,000 | part-08-runtime.js | 1 - 60,000 |
| 480,001 - 496,069 | part-09-main.js | 1 - 16,069 |

**è®¡ç®—å…¬å¼**ï¼š
```
æ–‡ä»¶ç¼–å· = floor((è¡Œå· - 1) / 60000)
æ–‡ä»¶å†…è¡Œå· = ((è¡Œå· - 1) % 60000) + 1
```

ä¾‹å¦‚ï¼šåŸå§‹ç¬¬ 150,000 è¡Œ
- æ–‡ä»¶ç¼–å· = floor(149,999 / 60,000) = 2 â†’ part-03-dependencies.js
- æ–‡ä»¶å†…è¡Œå· = (149,999 % 60,000) + 1 = 30,000

## âœ… éªŒè¯

é‡å»ºçš„æ–‡ä»¶ä¸åŸå§‹æ–‡ä»¶å®Œå…¨ç›¸åŒï¼š

```bash
$ md5sum cli.js cli-rebuilt.js
3185916b5b6c1a061a9ad8a544cd8a99  cli.js
3185916b5b6c1a061a9ad8a544cd8a99  cli-rebuilt.js
```

âœ… **MD5 æ ¡éªŒå’ŒåŒ¹é…** - è¯æ˜æ˜¯ç­‰ä»·å˜æ¢ï¼

## ğŸ“ NPM è„šæœ¬

```bash
# ä½¿ç”¨åŸå§‹ cli.js
npm start

# é‡å»ºå¹¶ä½¿ç”¨
npm run build
npm run start:rebuilt

# æµ‹è¯•
npm test
```

## âš ï¸ é‡è¦è¯´æ˜

### ä»£ç ä»ç„¶æ˜¯å‹ç¼©çš„

æ‹†åˆ†åçš„æ–‡ä»¶**ä»ç„¶æ˜¯æ‰“åŒ…å‹ç¼©çš„ä»£ç **ï¼Œå˜é‡åå·²æ··æ·†ï¼š
- `$Q9`, `HQ9`, `zQ9` ç­‰æ··æ·†çš„å˜é‡å
- æ²¡æœ‰æ³¨é‡Š
- ä»£ç é€»è¾‘éš¾ä»¥ç†è§£

**ä½†æ˜¯**ï¼Œç°åœ¨ä½ å¯ä»¥ï¼š
- âœ… æ‰“å¼€æ–‡ä»¶
- âœ… æœç´¢å…³é”®å­—
- âœ… å®šä½åŠŸèƒ½
- âœ… æŸ¥çœ‹ä»£ç ç»“æ„

### å¦‚æœéœ€è¦çœŸæ­£å¯è¯»çš„ä»£ç 

è¦è·å¾—çœŸæ­£å¯è¯»çš„ã€æ¨¡å—åŒ–çš„ä»£ç ï¼Œä½ éœ€è¦ï¼š

1. **ä½¿ç”¨æºç æ˜ å°„**ï¼ˆå¦‚æœ Anthropic æä¾›ï¼‰
2. **è®¿é—®åŸå§‹æºç ä»“åº“**
3. **ä½¿ç”¨åæ··æ·†å·¥å…·**ï¼ˆæ•ˆæœæœ‰é™ï¼‰
4. **åŸºäºåŠŸèƒ½é‡æ–°å®ç°**

## ğŸ‰ æ€»ç»“

âœ… **ä»»åŠ¡å®Œæˆ**ï¼šå°† 496K è¡Œçš„ cli.js æ‹†åˆ†ä¸º 10 ä¸ªå¯ç®¡ç†çš„æ–‡ä»¶
âœ… **ç­‰ä»·å˜æ¢**ï¼šé‡å»ºåçš„æ–‡ä»¶ä¸åŸå§‹æ–‡ä»¶å®Œå…¨ç›¸åŒ
âœ… **å®ç”¨æ”¹è¿›**ï¼šç°åœ¨å¯ä»¥æœç´¢ã€æµè§ˆå’Œç®¡ç†ä»£ç 
âœ… **Git å‹å¥½**ï¼šsrc/parts/ ç›®å½•å¯ä»¥è¢« git è¿½è¸ª

ç°åœ¨ä½ å¯ä»¥æ›´å®¹æ˜“åœ°ï¼š
- æœç´¢ç‰¹å®šåŠŸèƒ½
- ç†è§£ä»£ç ç»“æ„
- å®šä½é—®é¢˜
- è¿›è¡Œè°ƒè¯•

è™½ç„¶ä»£ç ä»ç„¶æ˜¯æ··æ·†çš„ï¼Œä½†è‡³å°‘ç°åœ¨å®ƒæ˜¯**å¯ä»¥æ‰“å¼€å’Œæœç´¢çš„**ï¼
